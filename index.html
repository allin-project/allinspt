<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Sports 예측 게임 - 한국 스포츠 실시간 예측</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="K리그, KBO, KBL, V리그 실시간 스포츠 예측 게임. 포인트로 안전하게 즐기는 한국 스포츠 예측 플랫폼">
    <meta name="keywords" content="K리그, KBO, KBL, V리그, 스포츠예측, 한국스포츠, 축구예측, 야구예측">
    <meta name="author" content="K-Sports Game">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="K-Sports 예측 게임">
    <meta property="og:description" content="한국 스포츠 실시간 예측 게임 - K리그, KBO, KBL, V리그">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://via.placeholder.com/1200x630/667eea/ffffff?text=K-Sports+Game">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="K-Sports">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚽</text></svg>">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --success-color: #10b981;
            --error-color: #ef4444;
            --warning-color: #f59e0b;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body { 
            font-family: 'Noto Sans KR', sans-serif;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .gradient-bg { 
            background: var(--primary-gradient);
        }
        
        .card-hover { 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .pulse-animation { 
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            .grid-responsive {
                grid-template-columns: 1fr;
            }
            
            .text-responsive {
                font-size: 1.5rem;
            }
        }
        
        /* Accessibility improvements */
        .focus-visible:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
        
        /* Performance optimizations */
        .will-change-transform {
            will-change: transform;
        }
        
        .gpu-accelerated {
            transform: translateZ(0);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded-lg z-50">
        메인 콘텐츠로 건너뛰기
    </a>

    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg sticky top-0 z-40" role="banner">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center flex-wrap gap-4">
                <div class="flex items-center space-x-3">
                    <div class="text-3xl" role="img" aria-label="축구공">⚽</div>
                    <h1 class="text-2xl md:text-3xl font-bold">K-Sports 예측 게임</h1>
                </div>
                <div class="flex items-center space-x-4 md:space-x-6">
                    <div class="bg-white/20 px-3 md:px-4 py-2 rounded-lg">
                        <span class="text-sm opacity-90">보유 포인트</span>
                        <div class="text-lg md:text-xl font-bold" id="userPoints">10,000P</div>
                    </div>
                    <div class="bg-white/20 px-3 md:px-4 py-2 rounded-lg">
                        <span class="text-sm opacity-90">예측 성공률</span>
                        <div class="text-lg md:text-xl font-bold" id="winRate">0%</div>
                    </div>
                    <button onclick="shareGame()" class="bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-colors no-print" aria-label="게임 공유하기">
                        📤
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main id="main-content" class="container mx-auto px-4 py-8">
        <!-- GitHub Pages 배포 성공 알림 -->
        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6" role="alert">
            <div class="flex items-center">
                <span class="text-xl mr-2">🎉</span>
                <div>
                    <strong class="font-bold">GitHub Pages 배포 성공!</strong>
                    <span class="block sm:inline"> 이제 전 세계 어디서나 접속 가능합니다.</span>
                </div>
            </div>
        </div>

        <!-- Stats Dashboard -->
        <section class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 mb-8" aria-label="통계 대시보드">
            <div class="bg-white rounded-xl p-4 md:p-6 shadow-md card-hover fade-in">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">총 예측</p>
                        <p class="text-xl md:text-2xl font-bold text-blue-600" id="totalBets">0</p>
                    </div>
                    <div class="text-2xl md:text-3xl" role="img" aria-label="통계">📊</div>
                </div>
            </div>
            <div class="bg-white rounded-xl p-4 md:p-6 shadow-md card-hover fade-in">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">성공한 예측</p>
                        <p class="text-xl md:text-2xl font-bold text-green-600" id="wonBets">0</p>
                    </div>
                    <div class="text-2xl md:text-3xl" role="img" aria-label="성공">✅</div>
                </div>
            </div>
            <div class="bg-white rounded-xl p-4 md:p-6 shadow-md card-hover fade-in">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">총 수익</p>
                        <p class="text-xl md:text-2xl font-bold text-purple-600" id="totalProfit">0P</p>
                    </div>
                    <div class="text-2xl md:text-3xl" role="img" aria-label="수익">💰</div>
                </div>
            </div>
            <div class="bg-white rounded-xl p-4 md:p-6 shadow-md card-hover fade-in">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">현재 랭킹</p>
                        <p class="text-xl md:text-2xl font-bold text-orange-600" id="userRank">브론즈</p>
                    </div>
                    <div class="text-2xl md:text-3xl" role="img" aria-label="랭킹">🏆</div>
                </div>
            </div>
        </section>

        <!-- Live Games Section -->
        <section class="bg-white rounded-xl shadow-lg p-4 md:p-6 mb-8 fade-in">
            <div class="flex items-center justify-between mb-6 flex-wrap gap-4">
                <h2 class="text-xl md:text-2xl font-bold text-gray-800 flex items-center">
                    <span class="text-red-500 pulse-animation mr-2" role="img" aria-label="라이브">🔴</span>
                    실시간 경기
                    <span id="dataStatus" class="ml-3 text-sm bg-green-100 text-green-600 px-2 py-1 rounded-full">
                        GitHub Pages 배포됨
                    </span>
                </h2>
                <div class="flex items-center space-x-3">
                    <span id="lastUpdate" class="text-sm text-gray-500 hidden md:inline"></span>
                    <button onclick="refreshGames()" 
                            class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors focus-visible"
                            aria-label="경기 데이터 새로고침">
                        🔄 새로고침
                    </button>
                </div>
            </div>
            <div id="liveGames" class="space-y-4" role="region" aria-label="실시간 경기 목록">
                <!-- Live games will be populated here -->
            </div>
        </section>

        <!-- Upcoming Games Section -->
        <section class="bg-white rounded-xl shadow-lg p-4 md:p-6 mb-8 fade-in">
            <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-6 flex items-center">
                <span class="mr-2" role="img" aria-label="일정">📅</span>
                예정된 경기
            </h2>
            <div id="upcomingGames" class="space-y-4" role="region" aria-label="예정된 경기 목록">
                <!-- Upcoming games will be populated here -->
            </div>
        </section>

        <!-- My Bets Section -->
        <section class="bg-white rounded-xl shadow-lg p-4 md:p-6 fade-in">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl md:text-2xl font-bold text-gray-800 flex items-center">
                    <span class="mr-2" role="img" aria-label="내역">📋</span>
                    내 예측 내역
                </h2>
                <button onclick="exportBets()" class="text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-lg transition-colors no-print">
                    내보내기
                </button>
            </div>
            <div id="myBets" class="space-y-3" role="region" aria-label="내 예측 내역">
                <p class="text-gray-500 text-center py-8">아직 예측한 경기가 없습니다.</p>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-16 no-print" role="contentinfo">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-lg font-bold mb-4">K-Sports 예측 게임</h3>
                    <p class="text-gray-300 text-sm">한국 스포츠 실시간 예측 플랫폼</p>
                    <p class="text-gray-400 text-xs mt-2">GitHub Pages로 배포됨</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-3">지원 스포츠</h4>
                    <ul class="text-sm text-gray-300 space-y-1">
                        <li>⚽ K리그1 (축구)</li>
                        <li>⚾ KBO (야구)</li>
                        <li>🏀 KBL (농구)</li>
                        <li>🏐 V리그 (배구)</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-3">배포 정보</h4>
                    <ul class="text-sm text-gray-300 space-y-1">
                        <li>✅ GitHub Pages</li>
                        <li>🌐 전 세계 접속 가능</li>
                        <li>📱 모바일 최적화</li>
                        <li>🔒 HTTPS 보안</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-4 text-center text-sm text-gray-400">
                <p>&copy; 2024 K-Sports 예측 게임. GitHub Pages로 배포됨.</p>
                <p class="mt-1">무료 호스팅으로 전 세계 서비스 중!</p>
            </div>
        </div>
    </footer>

    <!-- Betting Modal -->
    <div id="bettingModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="bg-white rounded-xl p-6 w-full max-w-md">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modal-title" class="text-xl font-bold">예측하기</h3>
                <button onclick="closeBettingModal()" class="text-gray-500 hover:text-gray-700 p-1" aria-label="모달 닫기">✕</button>
            </div>
            <div id="modalContent">
                <!-- Modal content will be populated here -->
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="fixed top-4 right-4 bg-white border-l-4 border-blue-500 rounded-lg shadow-lg p-4 hidden z-50 max-w-sm">
        <div class="flex items-center">
            <div class="flex-shrink-0">
                <span id="toastIcon">ℹ️</span>
            </div>
            <div class="ml-3">
                <p id="toastMessage" class="text-sm font-medium text-gray-900"></p>
            </div>
            <button onclick="hideToast()" class="ml-auto text-gray-400 hover:text-gray-600">
                <span class="sr-only">닫기</span>
                ✕
            </button>
        </div>
    </div>

    <script>
        // Enhanced game state with persistence
        let gameState = {
            userPoints: 10000,
            totalBets: 0,
            wonBets: 0,
            totalProfit: 0,
            myBets: [],
            userRank: '브론즈',
            lastSaved: null
        };

        // Real sports data storage
        let realGamesData = [];
        let lastUpdateTime = null;

        // Korean sports teams mapping
        const KOREAN_TEAMS = {
            kleague: [
                'FC서울', '수원FC', '울산HD', '포항스틸러스', '전북현대', '광주FC',
                '대구FC', '제주유나이티드', '인천유나이티드', '강원FC', '김천상무', '서울이랜드'
            ],
            kbo: [
                'LG트윈스', '두산베어스', 'KT위즈', 'SSG랜더스', 'NC다이노스', 
                '삼성라이온즈', 'KIA타이거즈', '롯데자이언츠', '한화이글스', 'kt위즈'
            ],
            kbl: [
                '서울SK', '부산KT', '안양KGC', '창원LG', '울산현대모비스', 
                '고양오리온', '원주DB', '전주KCC', '수원KT', '서울삼성'
            ],
            vleague: [
                '현대캐피탈', 'OK금융그룹', '대한항공', '삼성화재', 'KB손해보험',
                '우리카드', '한국전력', 'GS칼텍스', '흥국생명', 'IBK기업은행'
            ]
        };

        // Load saved game state
        function loadGameState() {
            try {
                const saved = localStorage.getItem('k-sports-game-state');
                if (saved) {
                    const parsedState = JSON.parse(saved);
                    gameState = { ...gameState, ...parsedState };
                    console.log('게임 상태 로드 완료');
                }
            } catch (error) {
                console.error('게임 상태 로드 실패:', error);
            }
        }

        // Save game state
        function saveGameState() {
            try {
                gameState.lastSaved = new Date().toISOString();
                localStorage.setItem('k-sports-game-state', JSON.stringify(gameState));
            } catch (error) {
                console.error('게임 상태 저장 실패:', error);
                showToast('데이터 저장에 실패했습니다.', 'error');
            }
        }

        // Enhanced toast notification system
        function showToast(message, type = 'info', duration = 3000) {
            const toast = document.getElementById('toast');
            const icon = document.getElementById('toastIcon');
            const messageEl = document.getElementById('toastMessage');
            
            const icons = {
                info: 'ℹ️',
                success: '✅',
                error: '❌',
                warning: '⚠️'
            };
            
            const colors = {
                info: 'border-blue-500',
                success: 'border-green-500',
                error: 'border-red-500',
                warning: 'border-yellow-500'
            };
            
            icon.textContent = icons[type] || icons.info;
            messageEl.textContent = message;
            toast.className = `fixed top-4 right-4 bg-white ${colors[type] || colors.info} rounded-lg shadow-lg p-4 z-50 max-w-sm`;
            toast.classList.remove('hidden');
            
            setTimeout(() => {
                toast.classList.add('hidden');
            }, duration);
        }

        function hideToast() {
            document.getElementById('toast').classList.add('hidden');
        }

        // Generate realistic games
        function generateRealisticGames(sport, teams, hasDraw) {
            const games = [];
            const today = new Date();
            
            // Generate today's games
            for (let i = 0; i < Math.floor(Math.random() * 4) + 2; i++) {
                const homeTeam = teams[Math.floor(Math.random() * teams.length)];
                let awayTeam;
                do {
                    awayTeam = teams[Math.floor(Math.random() * teams.length)];
                } while (awayTeam === homeTeam);

                const isLive = Math.random() < 0.3;
                const gameTime = new Date(today);
                gameTime.setHours(18 + Math.floor(Math.random() * 4), Math.floor(Math.random() * 60));

                const homeStrength = Math.random();
                const awayStrength = Math.random();
                const total = homeStrength + awayStrength;
                
                const homeOdds = Math.round((2 / (homeStrength / total)) * 10) / 10;
                const awayOdds = Math.round((2 / (awayStrength / total)) * 10) / 10;
                const drawOdds = hasDraw ? Math.round((3.5 + Math.random() * 1.5) * 10) / 10 : null;

                games.push({
                    id: Date.now() + i + Math.random() * 1000,
                    sport: sport,
                    homeTeam: homeTeam,
                    awayTeam: awayTeam,
                    homeOdds: Math.max(1.1, Math.min(homeOdds, 10.0)),
                    awayOdds: Math.max(1.1, Math.min(awayOdds, 10.0)),
                    drawOdds: drawOdds,
                    status: isLive ? 'live' : 'upcoming',
                    time: isLive ? `${Math.floor(Math.random() * 90) + 1}분` : gameTime.toLocaleTimeString('ko-KR', {hour: '2-digit', minute: '2-digit'}),
                    date: '오늘',
                    homeScore: isLive ? Math.floor(Math.random() * 3) : null,
                    awayScore: isLive ? Math.floor(Math.random() * 3) : null,
                    venue: `${homeTeam} 홈구장`
                });
            }

            return games;
        }

        // Generate sample data
        function generateSampleData() {
            const allGames = [
                ...generateRealisticGames('⚽ K리그1', KOREAN_TEAMS.kleague, true),
                ...generateRealisticGames('⚾ KBO', KOREAN_TEAMS.kbo, false),
                ...generateRealisticGames('🏀 KBL', KOREAN_TEAMS.kbl, false),
                ...generateRealisticGames('🏐 V리그', KOREAN_TEAMS.vleague, false)
            ];
            
            realGamesData = allGames;
            return allGames;
        }

        // Render live games
        function renderLiveGames() {
            const liveGames = realGamesData.filter(game => game.status === 'live');
            const container = document.getElementById('liveGames');
            
            if (liveGames.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <div class="text-4xl mb-4">⏰</div>
                        <p class="text-gray-500">현재 진행 중인 경기가 없습니다.</p>
                        <p class="text-sm text-gray-400 mt-2">곧 새로운 경기가 시작됩니다!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = liveGames.map(game => `
                <article class="border rounded-lg p-4 card-hover" role="article">
                    <div class="flex justify-between items-center mb-3">
                        <div class="flex items-center space-x-2">
                            <span class="text-sm font-medium text-blue-600">${game.sport}</span>
                            <span class="bg-red-100 text-red-600 px-2 py-1 rounded text-xs font-medium pulse-animation">
                                LIVE ${game.time}
                            </span>
                        </div>
                        <div class="text-lg font-bold">${game.homeScore || 0} : ${game.awayScore || 0}</div>
                    </div>
                    <div class="grid grid-cols-${game.sport.includes('⚽') ? '3' : '2'} gap-3">
                        <button onclick="openBettingModal(${game.id}, 'home')" 
                                class="bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg p-3 transition-colors">
                            <div class="font-medium text-gray-800">${game.homeTeam}</div>
                            <div class="text-blue-600 font-bold">${game.homeOdds}</div>
                        </button>
                        ${game.sport.includes('⚽') ? `
                        <button onclick="openBettingModal(${game.id}, 'draw')" 
                                class="bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg p-3 transition-colors">
                            <div class="font-medium text-gray-800">무승부</div>
                            <div class="text-gray-600 font-bold">${game.drawOdds}</div>
                        </button>
                        ` : ''}
                        <button onclick="openBettingModal(${game.id}, 'away')" 
                                class="bg-red-50 hover:bg-red-100 border border-red-200 rounded-lg p-3 transition-colors">
                            <div class="font-medium text-gray-800">${game.awayTeam}</div>
                            <div class="text-red-600 font-bold">${game.awayOdds}</div>
                        </button>
                    </div>
                </article>
            `).join('');
        }

        function renderUpcomingGames() {
            const upcomingGames = realGamesData.filter(game => game.status === 'upcoming');
            const container = document.getElementById('upcomingGames');
            
            if (upcomingGames.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <div class="text-4xl mb-4">📅</div>
                        <p class="text-gray-500">예정된 경기가 없습니다.</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = upcomingGames.map(game => `
                <article class="border rounded-lg p-4 card-hover" role="article">
                    <div class="flex justify-between items-center mb-3">
                        <div class="flex items-center space-x-2">
                            <span class="text-sm font-medium text-blue-600">${game.sport}</span>
                            <span class="bg-green-100 text-green-600 px-2 py-1 rounded text-xs font-medium">
                                ${game.date} ${game.time}
                            </span>
                        </div>
                    </div>
                    <div class="grid grid-cols-${game.sport.includes('⚽') ? '3' : '2'} gap-3">
                        <button onclick="openBettingModal(${game.id}, 'home')" 
                                class="bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg p-3 transition-colors">
                            <div class="font-medium text-gray-800">${game.homeTeam}</div>
                            <div class="text-blue-600 font-bold">${game.homeOdds}</div>
                        </button>
                        ${game.sport.includes('⚽') ? `
                        <button onclick="openBettingModal(${game.id}, 'draw')" 
                                class="bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg p-3 transition-colors">
                            <div class="font-medium text-gray-800">무승부</div>
                            <div class="text-gray-600 font-bold">${game.drawOdds}</div>
                        </button>
                        ` : ''}
                        <button onclick="openBettingModal(${game.id}, 'away')" 
                                class="bg-red-50 hover:bg-red-100 border border-red-200 rounded-lg p-3 transition-colors">
                            <div class="font-medium text-gray-800">${game.awayTeam}</div>
                            <div class="text-red-600 font-bold">${game.awayOdds}</div>
                        </button>
                    </div>
                </article>
            `).join('');
        }

        // Betting modal
        function openBettingModal(gameId, betType) {
            const game = realGamesData.find(g => g.id === gameId);
            if (!game) return;

            let teamName, odds;
            if (betType === 'home') {
                teamName = game.homeTeam;
                odds = game.homeOdds;
            } else if (betType === 'away') {
                teamName = game.awayTeam;
                odds = game.awayOdds;
            } else {
                teamName = '무승부';
                odds = game.drawOdds;
            }

            document.getElementById('modalContent').innerHTML = `
                <div class="space-y-4">
                    <div class="text-center">
                        <div class="text-lg font-medium text-gray-800">${game.sport}</div>
                        <div class="text-sm text-gray-600">${game.homeTeam} vs ${game.awayTeam}</div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg text-center">
                        <div class="text-lg font-bold text-blue-600">${teamName}</div>
                        <div class="text-2xl font-bold text-blue-800">${odds}배</div>
                    </div>
                    <div>
                        <label for="betAmount" class="block text-sm font-medium text-gray-700 mb-2">배팅 포인트</label>
                        <input type="number" id="betAmount" min="100" max="${gameState.userPoints}" step="100" 
                               class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500"
                               placeholder="최소 100P">
                        <div class="text-xs text-gray-500 mt-1">보유 포인트: ${gameState.userPoints.toLocaleString()}P</div>
                    </div>
                    <div class="flex space-x-3">
                        <button onclick="closeBettingModal()" 
                                class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-lg transition-colors">
                            취소
                        </button>
                        <button onclick="placeBet(${gameId}, '${betType}', ${odds})" 
                                class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition-colors">
                            예측하기
                        </button>
                    </div>
                </div>
            `;

            document.getElementById('bettingModal').classList.remove('hidden');
            document.getElementById('bettingModal').classList.add('flex');
        }

        function closeBettingModal() {
            document.getElementById('bettingModal').classList.add('hidden');
            document.getElementById('bettingModal').classList.remove('flex');
        }

        function placeBet(gameId, betType, odds) {
            const amount = parseInt(document.getElementById('betAmount').value);
            
            if (!amount || amount < 100) {
                showToast('최소 100P 이상 배팅해주세요.', 'warning');
                return;
            }
            
            if (amount > gameState.userPoints) {
                showToast('보유 포인트가 부족합니다.', 'error');
                return;
            }

            const game = realGamesData.find(g => g.id === gameId);
            let teamName;
            if (betType === 'home') teamName = game.homeTeam;
            else if (betType === 'away') teamName = game.awayTeam;
            else teamName = '무승부';

            gameState.userPoints -= amount;
            gameState.totalBets++;

            const bet = {
                id: Date.now(),
                gameId,
                sport: game.sport,
                match: `${game.homeTeam} vs ${game.awayTeam}`,
                prediction: teamName,
                amount,
                odds,
                expectedWin: Math.floor(amount * odds),
                status: 'pending',
                time: new Date().toLocaleString('ko-KR')
            };
            
            gameState.myBets.unshift(bet);
            saveGameState();

            setTimeout(() => simulateResult(bet.id), 3000 + Math.random() * 5000);

            updateUI();
            renderMyBets();
            closeBettingModal();
            
            showToast(`${teamName}에 ${amount.toLocaleString()}P 배팅 완료!`, 'success');
        }

        function simulateResult(betId) {
            const bet = gameState.myBets.find(b => b.id === betId);
            if (!bet) return;

            const isWin = Math.random() < 0.6;
            
            if (isWin) {
                bet.status = 'won';
                gameState.userPoints += bet.expectedWin;
                gameState.wonBets++;
                gameState.totalProfit += (bet.expectedWin - bet.amount);
                showToast(`🎉 ${bet.prediction} 예측 적중! +${bet.expectedWin.toLocaleString()}P`, 'success', 5000);
            } else {
                bet.status = 'lost';
                gameState.totalProfit -= bet.amount;
                showToast(`😔 ${bet.prediction} 예측 실패...`, 'error');
            }

            updateUserRank();
            saveGameState();
            updateUI();
            renderMyBets();
        }

        function updateUserRank() {
            const winRate = gameState.totalBets > 0 ? gameState.wonBets / gameState.totalBets : 0;
            
            if (winRate >= 0.7) gameState.userRank = '다이아몬드';
            else if (winRate >= 0.6) gameState.userRank = '플래티넘';
            else if (winRate >= 0.5) gameState.userRank = '골드';
            else if (winRate >= 0.4) gameState.userRank = '실버';
            else gameState.userRank = '브론즈';
        }

        function renderMyBets() {
            const container = document.getElementById('myBets');
            
            if (gameState.myBets.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <div class="text-4xl mb-4">📋</div>
                        <p class="text-gray-500">아직 예측한 경기가 없습니다.</p>
                        <p class="text-sm text-gray-400 mt-2">첫 번째 예측을 시작해보세요!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = gameState.myBets.map(bet => `
                <article class="border rounded-lg p-4 ${bet.status === 'won' ? 'bg-green-50 border-green-200' : 
                                                   bet.status === 'lost' ? 'bg-red-50 border-red-200' : 
                                                   'bg-yellow-50 border-yellow-200'}">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-1">
                                <span class="text-sm font-medium text-blue-600">${bet.sport}</span>
                                <span class="px-2 py-1 rounded text-xs font-medium ${
                                    bet.status === 'won' ? 'bg-green-100 text-green-600' :
                                    bet.status === 'lost' ? 'bg-red-100 text-red-600' :
                                    'bg-yellow-100 text-yellow-600'
                                }">
                                    ${bet.status === 'won' ? '✅ 적중' : bet.status === 'lost' ? '❌ 실패' : '⏳ 진행중'}
                                </span>
                            </div>
                            <div class="font-medium text-gray-800">${bet.match}</div>
                            <div class="text-sm text-gray-600">예측: ${bet.prediction} (${bet.odds}배)</div>
                            <div class="text-xs text-gray-500 mt-1">${bet.time}</div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold ${bet.status === 'won' ? 'text-green-600' : 
                                                   bet.status === 'lost' ? 'text-red-600' : 'text-gray-600'}">
                                ${bet.status === 'won' ? `+${bet.expectedWin.toLocaleString()}P` : 
                                  bet.status === 'lost' ? `-${bet.amount.toLocaleString()}P` : `${bet.amount.toLocaleString()}P`}
                            </div>
                        </div>
                    </div>
                </article>
            `).join('');
        }

        function updateUI() {
            document.getElementById('userPoints').textContent = `${gameState.userPoints.toLocaleString()}P`;
            document.getElementById('totalBets').textContent = gameState.totalBets;
            document.getElementById('wonBets').textContent = gameState.wonBets;
            document.getElementById('totalProfit').textContent = `${gameState.totalProfit >= 0 ? '+' : ''}${gameState.totalProfit.toLocaleString()}P`;
            document.getElementById('winRate').textContent = gameState.totalBets > 0 ? `${Math.round(gameState.wonBets / gameState.totalBets * 100)}%` : '0%';
            document.getElementById('userRank').textContent = gameState.userRank;
        }

        function refreshGames() {
            showToast('경기 데이터를 업데이트하는 중...', 'info');
            
            // Generate new sample data
            generateSampleData();
            renderLiveGames();
            renderUpcomingGames();
            
            const now = new Date().toLocaleTimeString('ko-KR');
            document.getElementById('lastUpdate').textContent = `마지막 업데이트: ${now}`;
            
            showToast('경기 데이터가 업데이트되었습니다!', 'success');
        }

        function shareGame() {
            const url = window.location.href;
            if (navigator.share) {
                navigator.share({
                    title: 'K-Sports 예측 게임',
                    text: '한국 스포츠 실시간 예측 게임에 참여해보세요!',
                    url: url
                });
            } else {
                navigator.clipboard.writeText(url).then(() => {
                    showToast('링크가 클립보드에 복사되었습니다!', 'success');
                });
            }
        }

        function exportBets() {
            if (gameState.myBets.length === 0) {
                showToast('내보낼 예측 내역이 없습니다.', 'warning');
                return;
            }

            const csvContent = [
                ['날짜', '스포츠', '경기', '예측', '배당률', '배팅금액', '결과', '수익'],
                ...gameState.myBets.map(bet => [
                    bet.time,
                    bet.sport,
                    bet.match,
                    bet.prediction,
                    bet.odds,
                    bet.amount,
                    bet.status === 'won' ? '적중' : bet.status === 'lost' ? '실패' : '진행중',
                    bet.status === 'won' ? bet.expectedWin - bet.amount : bet.status === 'lost' ? -bet.amount : 0
                ])
            ].map(row => row.join(',')).join('\n');

            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `k-sports-betting-history-${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
            
            showToast('예측 내역이 다운로드되었습니다.', 'success');
        }

        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('K-Sports 예측 게임 초기화 중...');
            
            loadGameState();
            generateSampleData();
            renderLiveGames();
            renderUpcomingGames();
            renderMyBets();
            updateUI();
            
            // Set up auto-refresh
            setInterval(refreshGames, 30000);
            setInterval(saveGameState, 60000);
            
            console.log('K-Sports 예측 게임 초기화 완료!');
            showToast('🎉 GitHub Pages 배포 성공! K-Sports 게임에 오신 것을 환영합니다!', 'success', 5000);
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96f9175f3373d1ea',t:'MTc1NTI2NTA5NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
